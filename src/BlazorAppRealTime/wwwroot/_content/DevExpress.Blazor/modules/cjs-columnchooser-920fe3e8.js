DxBlazorInternal.define("cjs-columnchooser-920fe3e8.js",(function(n,e,t){n("./cjs-chunk-9eab2df8.js");var o=n("./cjs-chunk-f9f4d45f.js");n("./cjs-chunk-315094e9.js");var c,s,i,a,u,r,l,f,d,p,v=n("./cjs-chunk-8f910901.js"),h=n("./cjs-dragAndDropUnit-9bd835d1.js"),m=null,g=-1,j=-1,y=!0,D=!1;function E(n,e,t,c){if(n.forEach((function(n){o.EnsureElement(n)})),a?a._id!==c._id&&(F(a),a=c):a=c,!f)for(var l=f=e;l.parentNode!==document&&l.classList;){if(l.classList.contains("modal-body")){D=!0;break}l=l.parentNode}if(u=new Map,r&&r.Dispose(),r=new v.EventRegister(f),m||(s=new Map,i=new Map,m=n),j=-1,r.AttachEventWithContext(document,"keydown",x,document),m&&(m.sort((function(n,e){return n.dataset.vindex-e.dataset.vindex})),d=function(n,e){if(D)return n;var t=n,o=getComputedStyle(t);for(;o.position!==e&&t.parentNode!==document;)t=t.parentNode,o=getComputedStyle(t);return t}(f,"absolute"),w(t&&!D),k()))var h=r.AttachEvent(d,"focusin",(function(){h.Dispose(),m[0].focus()}));z(),p&&(p.parentNode.removeChild(p),p=null)}function w(n){y=n,l&&l.Dispose();var e=document.querySelector(".column-chooser-exit-button");l=e?new h.FocusUnit(e,null,f,!y):null,i.forEach((function(n){n.Dispose()})),i=new Map,m.forEach((function(n){!function(n,e){var t=s.get(n.dataset.column);t||((t=new h.DragAndDropUnit(n,n.parentNode,R,".column-chooser-drag-icon-owner",B,D)).onDragStart=A,t.onDrag=_,t.onDragCancel=U,t.onDropAnimationEnd=M,s.set(n.dataset.column,t));t.Reset(),n.classList.remove("up"),n.classList.remove("down"),n.classList.remove("freeze");var o=i.get(n.dataset.column);o||((o=new h.FocusUnit(n,".custom-control-input",e,D||!y)).onFocus=L,o.onBlur=C,o.onClick=N,i.set(n.dataset.column,o));o.Reset()}(n,d)}))}function k(){return y}function x(n){switch(k()||(w(!0),9===n.keyCode&&m[m.length-1].focus()),n.keyCode){case 32:j>=0&&(n.preventDefault(),m[j].click());break;case 38:n.preventDefault(),b(-1);break;case 40:n.preventDefault(),b(1)}}function b(n){if(m&&s){j=(j+=n)<0?m.length-1:j;var e=i.get(m[j%=m.length].dataset.column);e&&e.focus()}}function L(n){j=m.indexOf(n)}function C(n){j===m.indexOf(n)&&(j===m.length-1&&l&&l.focus(),j=-1)}function N(n){k()&&w(!1)}function O(n){return m.find((function(e,t,o){return function(n,e){var t=S(n);if(!t)return!1;return t.top<=e&&e<=t.bottom}(e,n.y)}))}function R(n){var e=O(n);return e?{item:e,relativeRect:S(e)}:null}function z(){if(c&&c.style){var n=s.get(c.dataset.column);n&&n.Reset();var e=i.get(c.dataset.column);e&&e.Reset(),g=-1,c.childNodes.forEach((function(n){n.style&&(n.style.visibility="")})),c=null}}function A(n){g=m.indexOf(c=n),m.forEach((function(n){n.blur(),n!==c&&n.classList.add("freeze")})),c.childNodes.forEach((function(n){n.style&&(n.style.visibility="hidden")}));var e=i.get(c.dataset.column);e&&e.Stop()}function S(n){var e=u.get(n);if(e)return e;var t=h.GetClientRect(n),o=B();return e=new h.rectBlz(t.x-o.x,t.y-o.y,t.width,t.height),u.set(n,e),e}function M(n,e){m.forEach((function(n){s.get(n.dataset.column).Stop()})),p=f.cloneNode(!0),o.EraseBlazorIdentificators(p),p.style["z-index"]=2e3,f.parentNode.appendChild(p),a.invokeMethodAsync("OnElementsExchange",n.dataset.column,e.dataset.column).catch((function(n){void 0}))}function U(n){m.forEach((function(n){n.classList.remove("up"),n.classList.remove("down"),n.classList.remove("freeze")})),z()}function B(){var n=D?f.parentNode:f,e=h.GetClientRect(n);return 0!==n.scrollTop?{x:e.x,y:e.y-n.scrollTop}:e.location}function I(n){i.get(n.dataset.column).UpdateStyleMetadata()}function _(n,e){if(n){-1===g&&(g=m.indexOf(n));var t=O(e.centerOfDraggingObject);if(t){var o=m.indexOf(t),s=!1;m.forEach(g<o?function(n){c===n&&(s=!0),s?(I(n),n.classList.add("up")):n.classList.remove("up","down"),t===n&&(s=!1)}:g>o?function(n){t===n&&(s=!0),s?(I(n),n.classList.add("down")):n.classList.remove("up","down"),c===n&&(s=!1)}:function(n){n.classList.remove("up","down")})}}}function F(n){n._id===a._id&&(s.forEach((function(n){n.Dispose()})),i.forEach((function(n){n.Dispose()})),m=null,c=null,g=-1,f=null,u=null,s=null,i=null,a=null,r&&r.Dispose(),r=null,p&&(p.parentNode.removeChild(p),p=null))}var G={Init:E,Dispose:F};t.Dispose=F,t.Init=E,t.default=G}),["cjs-chunk-9eab2df8.js","cjs-chunk-f9f4d45f.js","cjs-chunk-315094e9.js","cjs-chunk-8f910901.js","cjs-dragAndDropUnit-9bd835d1.js"]);
