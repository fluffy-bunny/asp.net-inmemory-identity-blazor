import{W as t}from"./esm-chunk-dac9ea79.js";import{E as e}from"./esm-chunk-e05effe2.js";import{GetClientRectWithMargins as n,GetClientRect as i,pointBlz as s,geometry as r}from"./esm-dragAndDropUnit-9fa8c743.js";class o{constructor(t,e){this.element=t,this.getClientRect=e}get LeftTopCorner(){var t=this;return new h(this.element,(function(e){return t.getClientRect(e)}),(function(t){return{x:0,y:0}}))}get LeftBottomCorner(){var t=this;return new h(this.element,(function(e){var n=t.getClientRect(e);return new s(n.x,n.bottom)}),(function(e){var n=t.getClientRect(e);return new s(0,-n.height)}))}get RightTopCorner(){var t=this;return new h(this.element,(function(e){var n=t.getClientRect(e);return new s(n.right,n.y)}),(function(e){var n=t.getClientRect(e);return new s(n.width,0)}))}get RighttBottomCorner(){var t=this;return new h(this.element,(function(e){var n=t.getClientRect(e);return new s(n.right,n.bottom)}),(function(e){var n=t.getClientRect(e);return new s(n.width,-n.height)}))}get Center(){var t=this;return new h(this.element,(function(e){return t.getClientRect(e).center}))}}class h{constructor(t,e,n){this.element=t,this.getLocation=e,this.getDelta=n}get location(){return this.getLocation(this.element)}get delta(){return this.getDelta(this.element)}AnchorTo(t){return new l(this,t)}}class l{constructor(t,n){this.point=t,this.anchor=n,this.events=new e(this);var i=[];if(i.push([window,"resize"]),i.push([window,"scroll"]),this.containers=function(t,e){for(var n=[];null!==t&&"BODY"!=t.tagName&&"#document"!=t.nodeName;)e(t)&&n.push(t),t=t.parentNode;return 0===n.length?null:n}(this.anchor.element.parentNode,this.isElementScrollable),this.containers&&this.containers.forEach((function(t){i.push([t,"scroll"])})),this.CheckInCasesInt(i),"undefined"!=typeof ResizeObserver){var s=this;this.resizeObserver=new ResizeObserver((function(){s.Update()})),this.resizeObserver.observe(this.anchor.element),this.resizeObserver.observe(this.point.element)}else this.resizeObserver=null;this.notStaticParent=this.point.element.offsetParent,this.notStaticParent=this.isStatic(this.notStaticParent)?document.documentElement:this.notStaticParent,this.notStaticParent=null!==this.notStaticParent?this.notStaticParent:{x:0,y:0,scrollTop:0,scrollLeft:0},this.Update()}isElementScrollable(t){var e=getComputedStyle(t);return"static"===e.position&&("scroll"===e["overflow-x"]||"scroll"===e["overflow-y"]||"auto"===e["overflow-x"]||"auto"===e["overflow-y"])}isStatic(t){return"static"===getComputedStyle(t).position}Update(){var e=r(this.anchor.location,"+",this.point.delta,"-",this.notStaticParent,"+",{x:this.notStaticParent.scrollLeft,y:this.notStaticParent.scrollTop}),n=this.point.element;t((function(){n.style.left=e.x+"px",n.style.top=e.y+"px"}))}CheckInCasesInt(t){var e=this.events;t.forEach((function(t){e.AttachEvent(t[0],t[1],(function(t){this.Update()}))}))}CheckInCases(){return this.containers?(CheckInCasesInt(Array.from(arguments)),this.Update(),this):this}Dispose(){this.events&&(this.events.Dispose(),this.events=null,this.dropDownStartPos=null,this.containers=null,this.resizeObserver&&this.resizeObserver.disconnect())}}class a{constructor(t,n,i){if("undefined"!=typeof IntersectionObserver&&function(t,e){for(;null!=t;){if("BODY"==t.tagName||"#document"==t.nodeName)return null;if(e(t))return t;t=t.parentNode}return null}(n,this.selector)){var s={root:n,threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]};this.OnIntersectionChanged=i,this.events=new e(this),this.isMainElementVisible=!1;var r=this;this.observer=new IntersectionObserver((function(t){r.onIntersection(t)}),s),this.observer.observe(t),this.events.AttachEvent(n,"scroll",this.onScroll)}}selector(t){var e=getComputedStyle(t);return"static"===e.position&&("auto"===e["overflow-x"]||"auto"===e["overflow-y"])}onIntersection(t){var e=this.isMainElementVisible;this.isMainElementVisible=!1;for(var n=0;n<t.length;n++)this.isMainElementVisible=t[n].isIntersecting;e!==this.isMainElementVisible&&this.onScroll()}onScroll(){this.OnIntersectionChanged(this.isMainElementVisible)}Dispose(){this.events&&(this.observer.disconnect(),this.events.Dispose(),this.observer=null,this.events=null)}}function c(t){return new o(t,n)}function u(t){return new o(t,i)}function v(t,e,n){return new a(t,e,n)}export{c as P,v as T,u as a};
