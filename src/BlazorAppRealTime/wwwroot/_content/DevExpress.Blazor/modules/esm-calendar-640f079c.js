import"./esm-chunk-eaca7b99.js";import{H as e,t,z as n}from"./esm-chunk-dac9ea79.js";import{D as o}from"./esm-chunk-b9f5fab8.js";import{L as i,h as a,u as c}from"./esm-chunk-e2d38309.js";import{InitFocusHidingEvents as r}from"./esm-focus-utils-1e722fd2.js";import{T as s}from"./esm-chunk-38c61c5f.js";function l(t,o,l,h){if(t=e(t)){if(t.dayCells=void 0,function(e){i.attachEventToElement(e,"touchstart",S),i.attachEventToElement(e,"touchmove",E),i.attachEventToElement(e,"touchend",p),i.attachLongTabEventToElement(e,y),i.attachEventToElement(e,"mousedown",m),i.attachEventToElement(e,"mousemove",v),i.attachEventToElement(e,"mouseup",g)}(t),r(t.querySelector(".card-header.btn-group")),!h){o.style.width="",o.style.height="";let e=o.getBoundingClientRect();o.style.width=e.width+"px",o.style.height=e.height+"px"}return Promise.resolve("ok")}function f(e,n){for(var o,i=(t.dayCells||(t.dayCells=t.querySelectorAll(".dxbs-day")),t.dayCells),a=0;o=i[a];a++){var c=o.getBoundingClientRect();if(c.top<=n&&n<c.bottom&&c.left<=e&&e<c.right)return o}}function m(e){if(!a("TouchStart")){var n=d(e.srcElement);n&&(t.inSelectionMode=!0,t.firstDate=u(n))}}function v(e){t.inSelectionMode&&(t.throttledDrag||(t.throttledDrag=s.Throttle((function(e){var n=f(e.clientX,e.clientY);if(n){var o=u(n);if(!o||!t.firstDate)return;t.lastDate?l.invokeMethodAsync("ChangeSelectionRange",o):(l.invokeMethodAsync("StartSelectionRange",t.firstDate,!e.ctrlKey),t.lastDate=o)}}),20)),t.throttledDrag(e))}function g(e){t.inSelectionMode&&t.lastDate&&l.invokeMethodAsync("EndSelectionRange",!1),t.firstDate=void 0,t.lastDate=void 0,t.inSelectionMode=!1}function S(e){c((function(){}),"TouchStart",300,!0)}function y(e){var n=d(e.srcElement);if(n){t.inSelectionMode=!0;var o=u(n);t.lastDate=o,l.invokeMethodAsync("StartSelectionRange",o,!1)}}function E(e){if(t.inSelectionMode){var o=f(e.touches[0].clientX,e.touches[0].clientY);if(o){var i=u(o);i&&t.lastDate-i!=0&&l.invokeMethodAsync("ChangeSelectionRange",i)}n(e)}}function p(e){t.inSelectionMode&&(l.invokeMethodAsync("EndSelectionRange",!0),n(e)),t.inSelectionMode=!1}}function u(e){return new Date(parseInt(e.getAttribute("data-date")))}function d(e){return t(e,"dxbs-day")}function h(t){if(t=e(t))return o(t),o(t.querySelector(".card-header.btn-group")),Promise.resolve("ok")}const f={Init:l,Dispose:h};export default f;export{h as Dispose,l as Init};
